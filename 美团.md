# 美团

### （1）

##### 1、Retrofit的原理

  Retrofit是对OkHttp的封装，内部原理是基于OkHttp的请求方式的。Retrofit是基于注解方式开发的，所以会大大简化开发流程。



##### 2、TCP和UDP

- UDP
  - 无连接
  - 尽最大努力交付
  - 面向报文
  - 复用和分用
- TCP
  - 面向连接
  - 可靠传输
  - 面向字节流
  - 流量控制
  - 拥塞控制
  - 三次握手、四次挥手



##### 3、MVP模式

  M(Model数据层)、V(View视图层)、P(Presenter逻辑层)，Model提供数据访问，View视图层刷新界面，Presenter逻辑层提供View和Model层之间的桥梁。



##### 4、说一下Java线程安全

  线程安全就是多线程访问时，采用了加锁机制，当一个线程访问该类的某个数据时，进行保护，其他线程不能进行访问直到该线程读取完，其他线程才可使用。不会出现数据不一致或者数据污染。



##### 5、static关键字的作用

- static修饰的成员变量和方法，从属于类，而普通变量和方法从属于对象。静态方法不能调用非静态成员，非静态方法可以调用非静态成员。

- static变量被所有对象共享，在内存中只有一个副本，在类初次加载的时候被初始化；而非静态变量是对象所拥有的，在创建对象的时候被初始化，存在多个副本，互不影响。
- static代码块可以提高效率，可以把只需要执行一次的初始化操作放在static代码块中。



##### 6、onDraw、onMeasure、onLayout的作用

- onDraw

  决定如何绘制这个View

- onMeasure

  决定View本身大小多少

- onLayout

  决定View在ViewGroup中的位置如何



##### 7、内存泄漏检测的实现

- 开发过程中检测内存泄漏
  - 用开源检测框架LeakCanary，实现检测内存泄漏
  - 用Android Studio自带的Profiler检测内存使用情况
- 项目开发完成后检测内存泄漏
  - 用Profiler生成HPROF文件，导入MemoryAnalyzerTool中进行检测
- 项目交付后的检测
  - 用Bugly等框架进行远程分析



##### 8、Java四种应用的区别

- 强引用（Strong Reference）

  普遍存在，类似 Object obj = new Object() 这类的引用，只要强引用存在，即使抛出 OutOfMemory错误也不会回收这种对象。

- 软引用（Soft Reference)

  用来描述一些有用但不是必须的对象，只有在内存不足的时候JVM才会回收这类对象，这个特性一般用来实现缓存：比如网页缓存、图片缓存等。（用于Bitmap等）

- 弱引用（WeakReference）

  用来描述非必需对象，当JVM进行垃圾回收时，无论内存是否充足，都会回收弱引用关联的对象。

- 虚引用（PhantomReference）

  不影响对象的生命周期，在任何时候都可能被垃圾回收器回收



##### 9、Activity的启动模式

- standard标准模式

  默认模式，每当启动一个Activity，系统就会相应的创建一个实例，不管这个实例是否已经存在。

- singleTop 栈顶复用模式

  如果要启动的Activity处于栈的顶部，那么此时系统不会创建新的实例，而是直接打开此页面，同时执行它的onNewIntent()方法，可以通过Intent传值，且不执行它的onCreate()、onStart()方法。

- singleTask 栈内复用模式

  如果栈中存在这个Activity的实例就会复用这个Activity，不管它是否位于栈顶，回调它的onNewIntent()方法，并且弹出它上方的所有Activity。

- singleInstance 单实例模式

  该Activity单独占用一个Task栈，具有全局额唯一性。

##### 10、网络请求框架

- Retrofit
  - 动态代理、适配转换Call对象
  - RESTful的网络请求框架，内核是OkHttp，Retrofit进行了封装。
  - 可以配合RxJava使用，实现观察者模式。
  - 通过注解的方式
- OkHttp
  - 高性能
  - 支持同步、异步请求
  - 封装了线程池
- Volley
  - 不支持输入输出流，不适合下载和上传文件的操作
  - 适合轻量级操作，网络请求频繁，传输数据量小的场景
  - 支持图片加载



##### 11、为什么使用Glide？

- **易用性**

  Glide文档齐全，易于上手，可以快速开发。

  链式调用。

- **扩展性**

  网络、编码、缓存等都是模块化的，可以根据自身的需求扩展。

- **高性能以及低占用**

  - 重用内存
  - 本地化的生命周期
  - 对RecyclerView等控件做了细节调优

##### 12、Https的原理

- HTTPS协议 + SSL/TLS协议

- 为了兼顾安全与效率，同时使用了对称加密和非对称加密。数据是被对称加密传输的，数据传输的私钥是被非对称加密传输的。

- 三个密钥：服务器端的公钥和私钥，用来进行非对称加密；客户端生成的随机密钥，用来进行对称加密。

- 两次HTTP传输

  - **第一次：传输密钥**

    1.客户端向服务器发起HTTPS请求，连接到服务器的443端口

    2.服务器将自己的公钥发给客户端

    3.客户端检查公钥的合法性（证书）

    4.客户端生成随机的进行对称加密的密钥 Client Key ，用服务器公钥对Client Key进行非对称加密。

  - **第二次：传输数据**

​               1.客户端将加密后的Client Key发送给服务器

​               2.服务器用私钥把Client Key非对称解密，解密之后的明文就是客户端密钥

 			  3.用Client Key对数据进行对称加密，这样数据就成了密文，发送数据给客户端

​			   4.客户端收到数据，用Client Key进行对称解密，得到服务器发送的数据，这样				   HTTPS中的第二个HTTP请求结束，整个HTTPS传输完成。



### （2）

##### 1、Java域的关键字和区别

- Private

  该成员变量或方法是私有的，只有当前类有访问权限。

- Public

  该成员变量或方法对所有类或对象都是可见的，所有类或对象都可以直接访问。

- Protected

  该成员变量或方法对自己及其子类是可见的。

- Default

  该成员变量或方法只有自己和与其同一包内的类可见。

##### 2、Hashmap的数据结构以及如何计算Hashcode，地址冲突了怎么办？

